---
import { Identity } from "@type";
import { entityEnum } from "@utils/constants";
import Icon from "astro-icon";

interface Props {
  label: string;
  type: Identity["type"];
  name: Identity["name"];
  street: Identity["street"];
  apt: Identity["apt"];
  postalCode: Identity["postalCode"];
  city: Identity["city"];
  pin: Identity["pin"];
}

const { label, type, name, street, apt, postalCode, city, pin } = Astro.props;

const streetAddr = `${street}${apt?.toString().length ? ` / ${apt}` : ``}`;
const address = `${postalCode} ${city}, ${streetAddr}`;
const isPersonal = type === entityEnum.PERSONAL;
const typeLabel = isPersonal ? entityEnum.PERSONAL : entityEnum.COMPANY;
const pinLabel = isPersonal ? "PESEL" : "NIP";

const canDisplay = [name, street, postalCode, city, pin].every(
  (item) => item && item !== ""
);
---

{
  canDisplay ? (
    <p>
      {label && (
        <>
          {label}:
          <br />
        </>
      )}
      {name} ({typeLabel}) <br />
      {address}
      <br />
      {pinLabel}: {pin}
    </p>
  ) : (
    <div class="text-orangeDark flex gap-10 items-center">
      <Icon name="info" width={24} height={24} class="text-orange" />
      Uzupe≈Çnij dane
    </div>
  )
}
