---
import Layout from "./Layout.astro";

const { frontmatter } = Astro.props;
---

<Layout title={`Prawniczek - ${frontmatter.title}`}>
  <main>
    <article class="prose" data-title={frontmatter.title}>
      <slot />
    </article>
    <aside>
      <h3>Tw√≥j dokument jest gotowy!</h3>
      <button id="downloadWord">Pobierz plik Word</button>
      <button id="print">Drukuj</button>
    </aside>
  </main>
</Layout>

<style>
  main {
    @apply flex justify-center items-start gap-40;
    @apply flex-col lg:flex-row;
    @apply p-30;
  }

  article {
    @apply bg-white p-30 lg:p-50 w-[90vw];
    @apply order-2 lg:order-1;
  }

  aside {
    @apply order-1 lg:order-2;
    @apply flex lg:flex-col gap-10 items-start;
    @apply sticky top-30;
    @apply print:hidden;
  }

  aside button {
    @apply btn btn-default btn-big;
  }
</style>

<script>
  import exportDoc from "../utils/exportDoc";

  const downloadWord = document.querySelector("#downloadWord");
  const print = document.querySelector("#print");
  const docContent = document.querySelector("article");

  downloadWord.addEventListener("click", () => {
    exportDoc(docContent.innerHTML, docContent.getAttribute("data-title"));
  });

  print.addEventListener("click", () => {
    window.print();
  });
</script>
